#!/bin/bash

taskname="${1?First argument must be task name}"
ndays="${2:-1}"

checkfile=/tmp/task-timestamp-$taskname

if [[ -f "$checkfile" ]] ; then
    if (( $(fileage "$checkfile") < $ndays )) ; then
        echo "Skipping task: $taskname"
        exit 1
    fi
fi

echo "Running task: $taskname"
touch "$checkfile"
exit 0


#!/bin/bash

set -e

. mutil.sh

# Show only if stdin is terminal, or -f is given.

force=0
mode=--info
color=bcyan
print_to_term=1


eval "$(getopt.pl -Nxd 'Show a dialog box' '
e|error|c|critical  mode=--error; color=bred  # Show as error.
f|force             force=1                   # Show dialog even if stdin is not terminal.
s|no-terminal       print_to_term=0           # Do not show the message on terminal.
' "$@")"

message="$*"
if (( $print_to_term )); then
  {
    echo
    $color "    *** $message ***"
    echo
  } 1>&2
fi

if [[ -t 0 ]] || (( "$force" )) ; then
  if isx ; then
    zenity $mode --text "$message" 2>/dev/null &
  fi
fi
exit 0
